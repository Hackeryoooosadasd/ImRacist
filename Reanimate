    local UIS = game:GetService("UserInputService");
    local W,S,D,A = false,false,false,false
    
    
    local Folder = Instance.new("Folder")
    Folder.Parent = game.CoreGui
    Folder.Name = "Animations"
    
    local Run = Instance.new("Animation",Folder)
    Run.Name = "Run"
    Run.AnimationId = game.Players.LocalPlayer.Character.Animate.run:FindFirstChild("RunAnim").AnimationId
    local Running = game.Players.LocalPlayer.Character:WaitForChild("Humanoid"):LoadAnimation(Run)
    
    local Walk = Instance.new("Animation",Folder)
    Walk.Name = "Walk"
    Walk.AnimationId = game.Players.LocalPlayer.Character.Animate.walk:FindFirstChild("WalkAnim").AnimationId
    local Walking = game.Players.LocalPlayer.Character:WaitForChild("Humanoid"):LoadAnimation(Walk)
    
    local Idle = Instance.new("Animation",Folder)
    Idle.Name = "Idle"  
    Idle.AnimationId = game.Players.LocalPlayer.Character.Animate.idle:FindFirstChild("Animation1").AnimationId
    local Idles = game.Players.LocalPlayer.Character:WaitForChild("Humanoid"):LoadAnimation(Idle)
    
    
    if Run and Idle and Walk then
    if game.Players.LocalPlayer.Character.Animate then
    
    if Run.AnimationId == game.Players.LocalPlayer.Character.Animate.run:FindFirstChild("RunAnim").AnimationId and game.Players.LocalPlayer.Character.Animate.run then
    game.Players.LocalPlayer.Character.Animate.run:FindFirstChild("RunAnim").AnimationId = "rbxassetid://0"
    end
    
    if Walk.AnimationId == game.Players.LocalPlayer.Character.Animate.walk:FindFirstChild("WalkAnim").AnimationId and game.Players.LocalPlayer.Character.Animate.walk then
    game.Players.LocalPlayer.Character.Animate.walk:FindFirstChild("WalkAnim").AnimationId = "rbxassetid://0"
    end
    
    if Idle.AnimationId == game.Players.LocalPlayer.Character.Animate.idle:FindFirstChild("Animation1").AnimationId and game.Players.LocalPlayer.Character.Animate.idle then
    game.Players.LocalPlayer.Character.Animate.idle:FindFirstChild("Animation1").AnimationId = "rbxassetid://0"
    game.Players.LocalPlayer.Character.Animate.idle:FindFirstChild("Animation2").AnimationId = "rbxassetid://0"
    end
        
    end
    end
    
    
    UIS.InputBegan:Connect(function(input, processed)
    
    if (input.KeyCode == Enum.KeyCode.W and processed == false) and _G.ReAnimate then
        Idles:Stop()
        Running:Play()
        if game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 16 then
            Running:AdjustSpeed(1.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 12.8 then
            Running:AdjustSpeed(1)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 7 then
            Running:AdjustSpeed(0.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 0 then
            Running:AdjustSpeed(0)
            else 
            Running:AdjustSpeed(1.5)
            end
        W = true
    elseif (input.KeyCode == Enum.KeyCode.S and processed == false) and _G.ReAnimate then
        Idles:Stop()
        Running:Play()
        Running:AdjustSpeed(1.5)
        if game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 16 then
            Running:AdjustSpeed(1.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 12.8 then
            Running:AdjustSpeed(1)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 7 then
            Running:AdjustSpeed(0.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 0 then
            Running:AdjustSpeed(0)
            else 
            Running:AdjustSpeed(1.5)
            end
        S = true
    elseif (input.KeyCode == Enum.KeyCode.D and processed == false) and _G.ReAnimate then
        Idles:Stop()
        Running:Play()
        if game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 16 then
            Running:AdjustSpeed(1.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 12.8 then
            Running:AdjustSpeed(1)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 7 then
            Running:AdjustSpeed(0.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 0 then
            Running:AdjustSpeed(0)
            else 
            Running:AdjustSpeed(1.5)
            end
        D = true
    elseif (input.KeyCode == Enum.KeyCode.A and processed == false) and _G.ReAnimate then
        Idles:Stop()
        Running:Play()
        if game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 16 then
            Running:AdjustSpeed(1.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 12.8 then
            Running:AdjustSpeed(1)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 7 then
            Running:AdjustSpeed(0.5)
            elseif game.Players.LocalPlayer.Character.Humanoid.WalkSpeed == 0 then
            Running:AdjustSpeed(0)
            else 
            Running:AdjustSpeed(1.5)
            end
        A = true
    end
    
    end);
    
    UIS.InputEnded:Connect(function(input, processed)
    
    if (input.KeyCode == Enum.KeyCode.W and processed == false) and _G.ReAnimate then
        W = false
    elseif (input.KeyCode == Enum.KeyCode.S and processed == false) and _G.ReAnimate then
        S = false
    elseif (input.KeyCode == Enum.KeyCode.D and processed == false) and _G.ReAnimate then
        D = false
    elseif (input.KeyCode == Enum.KeyCode.A and processed == false) and _G.ReAnimate then
        A = false
    end
    
    if (input.KeyCode == Enum.KeyCode.W and processed == false) and W == false and S == false and D == false and A == false and _G.ReAnimate then
        Idles:Play()
    elseif (input.KeyCode == Enum.KeyCode.S and processed == false) and W == false and S == false and D == false and A == false and _G.ReAnimate then
        Idles:Play()
    elseif (input.KeyCode == Enum.KeyCode.D and processed == false) and W == false and S == false and D == false and A == false and _G.ReAnimate then
        Idles:Play()
    elseif (input.KeyCode == Enum.KeyCode.A and processed == false) and W == false and S == false and D == false and A == false and _G.ReAnimate then
        Idles:Play()
    end
    
    end);   
    
    local loser = game:GetService('RunService').Stepped:connect(function()
    if A == false and D == false and S == false and W == false and _G.ReAnimate then
    Running:Stop()
    end
    if _G.ReAnimate == false then
        Running:Stop()
        Idles:Stop()    
        if game.CoreGui.Animations then
            game.CoreGui.Animations:Destroy()
        end
        loser:Disconnect()
    end
    end)
